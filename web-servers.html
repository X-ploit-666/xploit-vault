<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web Servers: The Gatekeepers</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Plotly.js -->
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">

    <style>
        /* Palette: Neon Nights (Cyber/Tech Theme)
           Background: #0f172a (Slate 900)
           Card: #1e293b (Slate 800)
           Text Primary: #f8fafc (Slate 50)
           Accent Cyan: #22d3ee
           Accent Purple: #a855f7
           Accent Green: #10b981
           Accent Red: #ef4444
        */

        body {
            font-family: 'Inter', sans-serif;
            background-color: #0f172a;
            color: #f8fafc;
            scroll-behavior: smooth;
        }

        .font-mono {
            font-family: 'JetBrains Mono', monospace;
        }

        .neon-text {
            text-shadow: 0 0 10px rgba(34, 211, 238, 0.5);
        }

        .card-shadow {
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.5), 0 2px 4px -1px rgba(0, 0, 0, 0.3);
            border: 1px solid #334155;
        }

        /* CHART CONTAINER STYLING RULES (Mandatory) */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 350px;
            max-height: 400px;
        }

        @media (min-width: 768px) {
            .chart-container {
                height: 400px;
            }
        }

        /* Custom Flowchart CSS (Replacing Mermaid/SVG) */
        .flow-step {
            position: relative;
            z-index: 10;
        }
        
        .flow-line-h {
            position: absolute;
            top: 50%;
            left: 0;
            width: 100%;
            height: 2px;
            background: #475569;
            z-index: 1;
        }

        .terminal-window {
            background-color: #000;
            border-radius: 0.5rem;
            border: 1px solid #334155;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.5);
        }
        .terminal-header {
            background-color: #1e293b;
            padding: 0.5rem 1rem;
            border-top-left-radius: 0.5rem;
            border-top-right-radius: 0.5rem;
            display: flex;
            gap: 0.5rem;
        }
        .dot { width: 0.75rem; height: 0.75rem; border-radius: 50%; }
        .dot-red { background-color: #ef4444; }
        .dot-yellow { background-color: #f59e0b; }
        .dot-green { background-color: #22c55e; }

    </style>
</head>
<body class="antialiased selection:bg-cyan-500 selection:text-white">

    <!-- HERO SECTION -->
    <header class="relative overflow-hidden py-20 px-4">
        <div class="absolute inset-0 bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 opacity-50 z-0"></div>
        <div class="max-w-6xl mx-auto text-center relative z-10">
            <div class="inline-block px-4 py-1 mb-4 rounded-full border border-cyan-500 bg-cyan-900 bg-opacity-20 text-cyan-400 text-xs font-mono font-bold tracking-widest uppercase">
                Back-End Architecture Series
            </div>
            <h1 class="text-5xl md:text-7xl font-extrabold mb-6 tracking-tight text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-purple-500 neon-text">
                WEB SERVERS
            </h1>
            <h2 class="text-2xl md:text-3xl text-slate-300 font-light mb-8">
                The Gatekeepers of the Internet
            </h2>
            <p class="text-slate-400 max-w-2xl mx-auto text-lg leading-relaxed">
                A web server is the silent engine of the web. It is the program on the back-end machine that manages every HTTP request, routing traffic through ports 80 and 443 to deliver the content you see.
            </p>
        </div>
    </header>

    <main class="max-w-7xl mx-auto px-4 pb-20 space-y-24">

        <!-- SECTION 1: THE WORKFLOW -->
        <section>
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
                <div>
                    <h3 class="text-3xl font-bold text-white mb-4 border-l-4 border-cyan-500 pl-4">How It Works</h3>
                    <p class="text-slate-400 mb-6 leading-relaxed">
                        Imagine a massive office building. The Web Server is the receptionist. When you (the client) ask for a file, the server routes that request, finds the resource, and hands it back with a status report.
                    </p>
                    <ul class="space-y-4">
                        <li class="flex items-start bg-slate-800 p-4 rounded-lg card-shadow">
                            <span class="text-2xl mr-4">üì°</span>
                            <div>
                                <strong class="text-cyan-400 block">1. The Request</strong>
                                <span class="text-sm text-slate-400">Client asks for `index.html` via HTTP.</span>
                            </div>
                        </li>
                        <li class="flex items-start bg-slate-800 p-4 rounded-lg card-shadow">
                            <span class="text-2xl mr-4">üîÄ</span>
                            <div>
                                <strong class="text-purple-400 block">2. Routing</strong>
                                <span class="text-sm text-slate-400">Server listens on Port 80/443 and locates the file.</span>
                            </div>
                        </li>
                        <li class="flex items-start bg-slate-800 p-4 rounded-lg card-shadow">
                            <span class="text-2xl mr-4">üì¶</span>
                            <div>
                                <strong class="text-green-400 block">3. Response</strong>
                                <span class="text-sm text-slate-400">Server delivers data with a Status Code.</span>
                            </div>
                        </li>
                    </ul>
                </div>

                <!-- Visual Diagram (CSS/HTML) -->
                <div class="bg-slate-800 rounded-xl p-8 card-shadow relative overflow-hidden">
                    <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-cyan-500 to-purple-500"></div>
                    <h4 class="text-center text-slate-400 font-mono text-xs uppercase tracking-widest mb-10">Traffic Architecture Visualization</h4>
                    
                    <div class="flex flex-col space-y-8 relative">
                        <!-- Connecting Line Vertical -->
                        <div class="absolute left-1/2 top-4 bottom-4 w-0.5 bg-slate-600 transform -translate-x-1/2 z-0"></div>

                        <!-- Step 1 -->
                        <div class="relative z-10 bg-slate-900 border border-slate-700 p-4 rounded text-center w-3/4 mx-auto">
                            <div class="font-bold text-white">User Browser</div>
                            <div class="text-xs text-cyan-400 mt-1">GET /page.html</div>
                        </div>

                        <!-- Arrow Down -->
                        <div class="relative z-10 text-center text-slate-500">‚ñº</div>

                        <!-- Step 2 -->
                        <div class="relative z-10 bg-blue-900 border border-blue-700 p-6 rounded text-center w-full shadow-[0_0_15px_rgba(59,130,246,0.3)]">
                            <div class="font-bold text-white text-xl mb-2">WEB SERVER</div>
                            <div class="flex justify-center space-x-2 text-xs font-mono mb-2">
                                <span class="bg-blue-800 px-2 py-1 rounded text-blue-200">PORT 80</span>
                                <span class="bg-purple-800 px-2 py-1 rounded text-purple-200">PORT 443</span>
                            </div>
                            <div class="grid grid-cols-2 gap-2 text-xs text-left mt-4 bg-slate-900 p-2 rounded">
                                <div class="text-slate-400">1. Check Permissions?</div>
                                <div class="text-green-400 text-right">OK</div>
                                <div class="text-slate-400">2. Find File?</div>
                                <div class="text-green-400 text-right">FOUND</div>
                            </div>
                        </div>

                        <!-- Arrow Down -->
                        <div class="relative z-10 text-center text-slate-500">‚ñº</div>

                        <!-- Step 3 -->
                        <div class="relative z-10 bg-slate-900 border border-green-700 p-4 rounded text-center w-3/4 mx-auto">
                            <div class="font-bold text-white">Response</div>
                            <div class="text-xs text-green-400 mt-1">200 OK + HTML Data</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 2: STATUS CODES -->
        <section class="bg-slate-800 rounded-2xl p-8 md:p-12 card-shadow">
            <div class="mb-8 text-center">
                <h3 class="text-3xl font-bold text-white mb-2">The Server's Language</h3>
                <p class="text-slate-400">Servers communicate via numeric <strong>Status Codes</strong>. Understanding these is key to debugging.</p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <!-- Chart Container -->
                <div>
                     <h4 class="text-center text-slate-500 font-mono text-xs uppercase mb-4">Common Response Categories</h4>
                    <div class="chart-container">
                        <canvas id="statusCodeChart"></canvas>
                    </div>
                </div>

                <!-- Explanation Table -->
                <div class="overflow-hidden rounded-lg border border-slate-700">
                    <table class="min-w-full text-left text-sm text-slate-400">
                        <thead class="bg-slate-900 font-medium text-slate-200">
                            <tr>
                                <th class="px-6 py-4">Code Range</th>
                                <th class="px-6 py-4">Meaning</th>
                                <th class="px-6 py-4">Vibe</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-slate-700 bg-slate-800">
                            <tr>
                                <td class="px-6 py-4 font-mono text-green-400">200 OK</td>
                                <td>Success. Request processed.</td>
                                <td>‚úÖ</td>
                            </tr>
                            <tr>
                                <td class="px-6 py-4 font-mono text-yellow-400">301 / 302</td>
                                <td>Redirection. Moved to new URL.</td>
                                <td>üöß</td>
                            </tr>
                            <tr>
                                <td class="px-6 py-4 font-mono text-orange-400">400 / 404</td>
                                <td>Client Error. Bad syntax or Not Found.</td>
                                <td>ü§∑‚Äç‚ôÇÔ∏è</td>
                            </tr>
                            <tr>
                                <td class="px-6 py-4 font-mono text-red-400">401 / 403</td>
                                <td>Unauthorized. Access Denied.</td>
                                <td>üîí</td>
                            </tr>
                            <tr>
                                <td class="px-6 py-4 font-mono text-red-600">500 / 502</td>
                                <td>Server Error. Crash or Timeout.</td>
                                <td>üî•</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- SECTION 3: THE BIG THREE (MARKET SHARE) -->
        <section>
            <div class="text-center mb-12">
                <h3 class="text-3xl font-bold text-white mb-4">The Big Three</h3>
                <p class="text-slate-400 max-w-3xl mx-auto">
                    While many servers exist, three giants dominate the landscape. <strong>Apache</strong> provides flexibility, <strong>NGINX</strong> offers raw speed for high traffic, and <strong>IIS</strong> powers the corporate Microsoft world.
                </p>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- Market Share Chart -->
                <div class="lg:col-span-1 bg-slate-800 rounded-xl p-6 card-shadow flex flex-col items-center justify-center">
                    <h4 class="text-slate-200 font-bold mb-6">Global Market Share</h4>
                    <div class="chart-container" style="height: 300px;">
                        <canvas id="marketShareChart"></canvas>
                    </div>
                </div>

                <!-- 3D Analysis Plot -->
                <div class="lg:col-span-2 bg-slate-800 rounded-xl p-6 card-shadow">
                    <h4 class="text-slate-200 font-bold mb-2">Feature Landscape Analysis</h4>
                    <p class="text-xs text-slate-500 mb-4">Interactive 3D Plot: Comparing Speed, Flexibility, and Integration.</p>
                    <div id="featurePlot" class="w-full h-[400px] rounded-lg overflow-hidden border border-slate-700"></div>
                </div>
            </div>

            <!-- Server Detail Cards -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-8">
                <!-- Apache -->
                <div class="bg-slate-800 p-6 rounded-lg border-t-4 border-blue-500 card-shadow">
                    <div class="text-xl font-bold text-white mb-2">Apache</div>
                    <div class="text-xs font-mono bg-slate-900 inline-block px-2 py-1 rounded text-blue-400 mb-3">The Classic</div>
                    <p class="text-sm text-slate-400 mb-4">Hosts 40% of the web. Highly flexible with modules. Best for beginners & PHP.</p>
                    <div class="text-xs text-slate-500">Users: Apple, Adobe</div>
                </div>
                <!-- NGINX -->
                <div class="bg-slate-800 p-6 rounded-lg border-t-4 border-green-500 card-shadow">
                    <div class="text-xl font-bold text-white mb-2">NGINX</div>
                    <div class="text-xs font-mono bg-slate-900 inline-block px-2 py-1 rounded text-green-400 mb-3">The Speedster</div>
                    <p class="text-sm text-slate-400 mb-4">Async architecture for high concurrency. Hosts 60% of top 100k sites.</p>
                    <div class="text-xs text-slate-500">Users: Google, Netflix</div>
                </div>
                <!-- IIS -->
                <div class="bg-slate-800 p-6 rounded-lg border-t-4 border-purple-500 card-shadow">
                    <div class="text-xl font-bold text-white mb-2">IIS</div>
                    <div class="text-xs font-mono bg-slate-900 inline-block px-2 py-1 rounded text-purple-400 mb-3">The Corporate</div>
                    <p class="text-sm text-slate-400 mb-4">Microsoft's choice. Deep integration with Windows & Active Directory.</p>
                    <div class="text-xs text-slate-500">Users: Microsoft, Dell</div>
                </div>
            </div>
        </section>

        <!-- SECTION 4: cURL INTERACTION -->
        <section class="bg-slate-900 rounded-2xl p-8 border border-slate-800">
            <h3 class="text-2xl font-bold text-white mb-6 flex items-center">
                <span class="mr-3 text-purple-400">üíª</span> Command Line Interaction
            </h3>
            <p class="text-slate-400 mb-8">
                Admins don't just use browsers; they use tools like <strong>cURL</strong> to talk directly to servers.
            </p>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <!-- Terminal 1: HEADERS -->
                <div class="terminal-window">
                    <div class="terminal-header">
                        <div class="dot dot-red"></div>
                        <div class="dot dot-yellow"></div>
                        <div class="dot dot-green"></div>
                        <div class="text-xs text-slate-400 ml-2 font-mono">bash ‚Äî 80x24</div>
                    </div>
                    <div class="p-4 font-mono text-sm">
                        <div class="text-slate-300">
                            <span class="text-green-400">user@htb</span>:<span class="text-blue-400">~</span>$ curl -I https://academy.hackthebox.com
                        </div>
                        <div class="text-purple-300 mt-2">HTTP/2 200</div>
                        <div class="text-slate-400">date: Tue, 15 Dec 2020 19:54:29 GMT</div>
                        <div class="text-slate-400">content-type: text/html; charset=UTF-8</div>
                        <div class="text-slate-400">server: Apache</div>
                        <div class="mt-2 animate-pulse inline-block w-2 h-4 bg-slate-500"></div>
                    </div>
                </div>

                <!-- Explanation -->
                <div class="flex flex-col justify-center">
                    <h4 class="text-lg font-bold text-white mb-2">Analyzing Headers</h4>
                    <p class="text-slate-400 text-sm mb-4">
                        Using the <code>-I</code> flag asks the server for its "ID Card" (Headers) only. It confirms the status (200), the time, and the content type without downloading the whole page.
                    </p>
                    <div class="bg-slate-800 p-4 rounded border-l-2 border-green-500">
                        <div class="text-xs text-green-400 font-bold uppercase mb-1">Key Takeaway</div>
                        <p class="text-xs text-slate-300">This is how security pros fingerprint a server to see what software it is running (e.g., "server: Apache").</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- FOOTER -->
        <footer class="text-center py-12 border-t border-slate-800">
            <p class="text-slate-500 text-sm">Generated for Educational Purposes ‚Ä¢ Source: Web Server Fundamentals</p>
            <p class="text-slate-700 text-xs mt-2 font-mono">NO SVG ‚Ä¢ NO MERMAID ‚Ä¢ CANVAS RENDERED</p>
        </footer>

    </main>

    <!-- SCRIPTS -->
    <script>
        // --- HELPER: LABEL SPLITTING ---
        // Splits strings > 16 chars into arrays
        function splitLabel(str, maxLen = 16) {
            if (str.length <= maxLen) return str;
            const words = str.split(' ');
            const lines = [];
            let currentLine = words[0];

            for (let i = 1; i < words.length; i++) {
                if (currentLine.length + 1 + words[i].length <= maxLen) {
                    currentLine += ' ' + words[i];
                } else {
                    lines.push(currentLine);
                    currentLine = words[i];
                }
            }
            lines.push(currentLine);
            return lines;
        }

        // --- COMMON CHART OPTIONS ---
        const commonOptions = {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    labels: { color: '#94a3b8', font: { family: 'Inter', size: 12 } }
                },
                tooltip: {
                    backgroundColor: 'rgba(15, 23, 42, 0.9)',
                    titleColor: '#22d3ee',
                    bodyColor: '#cbd5e1',
                    borderColor: '#334155',
                    borderWidth: 1,
                    padding: 12,
                    callbacks: {
                        title: function(tooltipItems) {
                            const item = tooltipItems[0];
                            let label = item.chart.data.labels[item.dataIndex];
                            return Array.isArray(label) ? label.join(' ') : label;
                        }
                    }
                }
            }
        };

        // --- CHART 1: STATUS CODES (Bar) ---
        const ctx1 = document.getElementById('statusCodeChart').getContext('2d');
        const statusData = {
            labels: ["200 Success", "301 Redirect", "404 Not Found", "500 Error", "403 Forbidden"].map(l => splitLabel(l)),
            datasets: [{
                label: 'Response Frequency',
                data: [65, 10, 12, 5, 8], // Estimated distribution
                backgroundColor: [
                    '#10b981', // Green
                    '#f59e0b', // Amber
                    '#f97316', // Orange
                    '#ef4444', // Red
                    '#a855f7'  // Purple
                ],
                borderRadius: 4
            }]
        };
        new Chart(ctx1, {
            type: 'bar',
            data: statusData,
            options: {
                ...commonOptions,
                scales: {
                    y: { grid: { color: '#334155' }, ticks: { color: '#94a3b8' } },
                    x: { grid: { display: false }, ticks: { color: '#94a3b8' } }
                }
            }
        });

        // --- CHART 2: MARKET SHARE (Doughnut) ---
        const ctx2 = document.getElementById('marketShareChart').getContext('2d');
        new Chart(ctx2, {
            type: 'doughnut',
            data: {
                labels: ["Apache", "NGINX", "IIS", "Others"].map(l => splitLabel(l)),
                datasets: [{
                    data: [40, 30, 15, 15],
                    backgroundColor: ['#3b82f6', '#10b981', '#a855f7', '#64748b'],
                    borderColor: '#0f172a',
                    borderWidth: 2
                }]
            },
            options: {
                ...commonOptions,
                cutout: '70%',
                plugins: {
                    ...commonOptions.plugins,
                    legend: { position: 'bottom' }
                }
            }
        });

        // --- CHART 3: PLOTLY 3D FEATURE LANDSCAPE ---
        // Visualizing the trade-offs: Speed vs Flexibility vs Integration
        const trace1 = {
            x: [9, 6, 4],  // Flexibility (Apache high)
            y: [6, 10, 6], // Speed (Nginx high)
            z: [5, 4, 10], // Corp Integration (IIS high)
            mode: 'markers+text',
            type: 'scatter3d',
            text: ['Apache', 'NGINX', 'IIS'],
            textposition: 'top center',
            marker: {
                size: 15,
                color: ['#3b82f6', '#10b981', '#a855f7'], // Blue, Green, Purple
                opacity: 0.9,
                line: { color: 'white', width: 2 }
            },
            textfont: {
                color: 'white',
                size: 12,
                family: 'Inter'
            }
        };

        const layoutPlotly = {
            margin: {l: 0, r: 0, b: 0, t: 0},
            paper_bgcolor: 'rgba(0,0,0,0)',
            plot_bgcolor: 'rgba(0,0,0,0)',
            scene: {
                xaxis: { title: 'Flexibility', backgroundcolor: 'rgba(0,0,0,0)', gridcolor: '#334155', zerolinecolor: '#334155', tickfont: {color: '#94a3b8'}, titlefont: {color: '#cbd5e1'} },
                yaxis: { title: 'Speed', backgroundcolor: 'rgba(0,0,0,0)', gridcolor: '#334155', zerolinecolor: '#334155', tickfont: {color: '#94a3b8'}, titlefont: {color: '#cbd5e1'} },
                zaxis: { title: 'Corp Integration', backgroundcolor: 'rgba(0,0,0,0)', gridcolor: '#334155', zerolinecolor: '#334155', tickfont: {color: '#94a3b8'}, titlefont: {color: '#cbd5e1'} },
                camera: {
                    eye: {x: 1.5, y: 1.5, z: 1.2}
                }
            },
            showlegend: false
        };

        Plotly.newPlot('featurePlot', [trace1], layoutPlotly, {responsive: true, displayModeBar: false});

    </script>
</body>
</html>
